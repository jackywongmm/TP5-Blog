webpackJsonp([3],{"5CzO":function(e,t){},kCtu:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("3Js1"),n=s("oUFN"),o={components:{fontedHeader:a.a,fontedFooter:n.a},data:function(){return{fullscreen:!0,addComent:!1,message:{aid:this.$route.params.id,name:"",email:"",comment:""},post:{},comment:[""],rules:{name:[{required:!0,message:"请输入至少两位",trigger:"blur"},{min:2,max:5,message:"长度在 2 到 5 个字符",trigger:"blur"}],email:[{type:"email",required:!0,message:"请输入正确的邮箱",trigger:"blur"}],comment:[{required:!0,message:"请输入留言内容",trigger:"blur"},{min:2,max:100,message:"请填写多一点哟",trigger:"blur"}]}}},methods:{getData:function(){var e=this;this.$axiosPost({url:"api/Index/allList",params:{id:this.$route.params.id},resolve:function(t){1==t.status&&(e.post=t.data)}})},getComment:function(){var e=this;this.$axiosPost({url:"api/Index/queryComment",params:{aid:this.$route.params.id},resolve:function(t){1==t.status&&(e.comment=t.data,e.fullscreen=!1)}})},saveComment:function(){var e=this;this.$axiosPost({url:"api/Index/comment",params:this.message,resolve:function(t){1==t.status&&(e.getComment(),e.addComent=!1,e.$message({message:"感谢你的评论",type:"success"}))}})}},computed:{commentLength:function(){return this.comment.length}},created:function(){this.getData(),this.getComment()}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"details-wrap"},[s("fonted-header"),e._v(" "),s("div",{staticClass:"content"},[s("el-card",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreen,expression:"fullscreen",modifiers:{fullscreen:!0,lock:!0}}]},[s("h2",{staticStyle:{"text-align":"center"}},[e._v(e._s(e.post.title))]),e._v(" "),s("el-row",[s("el-col",{attrs:{span:5,offset:1}},[e._v("\n          文章类型：\n          "),s("el-tag",{attrs:{size:"small"}},[e._v(e._s(e.post.classification))])],1),e._v(" "),s("el-col",{attrs:{span:3,offset:10}},[e._v("\n          作者："+e._s(e.post.name)+"\n        ")]),e._v(" "),s("el-col",{attrs:{span:5}},[e._v("\n          发表于："+e._s(e.post.createTime)+"\n        ")])],1)],1),e._v(" "),s("el-card",{staticStyle:{"margin-top":"20px"}},[s("div",{staticClass:"detail-text",domProps:{innerHTML:e._s(e.post.content)}})]),e._v(" "),s("el-card",{staticStyle:{"margin-top":"20px"}},[s("el-row",[s("el-col",{attrs:{span:22}},[s("h3",[e._v("最新评论("+e._s(e.commentLength)+")：")])]),e._v(" "),s("el-col",{attrs:{span:2}},[s("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){e.addComent=!0}}},[e._v("评论")])],1)],1),e._v(" "),e._l(e.comment,function(t){return s("div",{staticClass:"comment-item"},[s("span",[e._v(e._s(t.createTime))]),e._v(" "),s("p",[e._v(e._s(t.name)+"："+e._s(t.comment))])])})],2)],1),e._v(" "),s("el-dialog",{attrs:{title:"评论",visible:e.addComent,width:"30%"},on:{"update:visible":function(t){e.addComent=t}}},[s("div",{staticClass:"item"},[s("el-form",{ref:"ruleform",attrs:{model:e.message,rules:e.rules}},[s("el-form-item",[s("el-row",{attrs:{gutter:40}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{prop:"name"}},[s("el-input",{attrs:{placeholder:"Name"},model:{value:e.message.name,callback:function(t){e.$set(e.message,"name",t)},expression:"message.name"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{prop:"email"}},[s("el-input",{attrs:{placeholder:"Emali"},model:{value:e.message.email,callback:function(t){e.$set(e.message,"email",t)},expression:"message.email"}})],1)],1)],1),e._v(" "),s("el-row",{staticStyle:{"margin-top":"40px"}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{prop:"comment"}},[s("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:8},placeholder:"Message"},model:{value:e.message.comment,callback:function(t){e.$set(e.message,"comment",t)},expression:"message.comment"}})],1)],1)],1)],1)],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.saveComment}},[e._v("确 定")])],1)],1)]),e._v(" "),s("fonted-footer")],1)},staticRenderFns:[]};var i=s("VU/8")(o,r,!1,function(e){s("5CzO")},"data-v-d9352552",null);t.default=i.exports}});
//# sourceMappingURL=3.ad9570550495f1ddb14c.js.map